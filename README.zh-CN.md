# agent-exec

[English](README.md) | 中文

Claude Code 的自动化迭代改进工具。防止过早完成，用时间和 token 换取最佳结果。迭代优化和 [Ralph 循环](https://beuke.org/ralph-wiggum-loop/) 的最小化控制器。

## 安装

```bash
go install github.com/LinHanLab/agent-exec/cmd/agent-exec@latest
```

## 工作原理

### Evolve 命令

使用 git 分支进行锦标赛式代码演化。创建竞争性实现，使用 AI 比较选择优胜者，并通过淘汰赛轮次迭代改进：

```
  ┌─────────────────────────────┐
  │  创建分支 A：运行初始计划   │
  └───────────────┬─────────────┘
                  │
                  ▼
          ┌───────────────┐
    ┌────►│  回合开始     │
    │     └───────┬───────┘
    │             │
    │             ▼
    │     ┌───────────────────────────────┐
    │     │  从当前优胜者创建挑战者分支 B │
    │     └───────┬───────────────────────┘
    │             │
    │             ▼
    │     ┌───────────────────────────────┐
    │     │  在分支 B 上运行改进提示      │
    │     └───────┬───────────────────────┘
    │             │
    │             ▼
    │     ┌──────────────────────────┐
    │     │  切换到原始分支          │
    │     │  运行比较提示            │
    │     │  (A vs B - 哪个更差？)   │
    │     └───────┬──────────────────┘
    │             │
    │             ▼
    │     ┌────────────────┐
    │     │  解析结果      │
    │     │  识别失败者    │
    │     └───────┬────────┘
    │             │
    │             ▼
    │     ┌──────────────────────────┐
    │     │  删除失败者分支          │
    │     │  优胜者成为当前分支      │
    │     └───────┬──────────────────┘
    │             │
    │             ▼
    │     ┌───────────────┐
    │     │  下一回合？   ├──是──┐
    │     └───────┬───────┘      │
    │             │ 否           │
    └─────────────┘              │
                  │              │
                  ▼              │
          ┌───────────────┐      │
          │  最终优胜者   │      │
          └───────────────┘      │
                                 │
                  ┌──────────────┘
                  │
                  ▼
          ┌───────────────┐
          │  休眠（可选） │
          └───────────────┘
```

### Loop 命令

简单的 Claude Code 提示迭代执行：

```
┌──────────────────────────────────────────┐
│  开始循环（N 次迭代）                    │
└──────────────┬───────────────────────────┘
               │
               ▼
       ┌───────────────┐
       │  运行提示     │◄────┐
       └───────┬───────┘     │
               │             │
               ▼             │
       ┌───────────────┐     │
       │  休眠（可选） │     │
       └───────┬───────┘     │
               │             │
               ▼             │
       ┌───────────────┐     │
       │  下一回合？   ├──是─┘
       └───────┬───────┘
               │ 否
               ▼
       ┌───────────────┐
       │   完成        │
       └───────────────┘
```


## 使用方法

查看详细使用说明和所有可用参数：

```bash
agent-exec --help
agent-exec loop --help
agent-exec evolve --help
```

## 示例

查看 [examples/run.sh](examples/run.sh) 了解使用 evolve 命令创建贪吃蛇游戏的完整示例。

